# AI-browser-extension

## 要件定義書

要件定義書：選択テキストAI送信ブラウザ拡張機能
🏷 プロジェクト名（仮）
AI Assist Linker

🎯 目的
ユーザーがWebページ上のテキストを選択し、右クリックからAIに送信することで、手間なく思考補助を得られるようにする。ChatGPTおよびGeminiの両方に自動でプロンプトを入力・送信し、AIの活用を加速させる。

👤 対象ユーザー（ペルソナ）
調べ物や情報整理をAIに任せたい学生・社会人

ChatGPTやGeminiを日常的に使うAI活用者

思考の壁打ち相手としてAIを使っているユーザー

🧩 機能一覧
1. テキスト選択検知
ユーザーがページ上で文字列を選択した状態で右クリックした際に、拡張機能のメニューが表示される。

2. 選択メニュー表示（context menu）
以下の選択肢を表示する：

「選択部分の詳しい解説」

「選択部分に関連したものを検索」

「文章を変えてプロンプトに入力」

3. プロンプト自動生成
各選択肢に応じて、選択テキストをプロンプトテンプレートに変換：

メニュー	プロンプト例
解説	以下の文章を詳しく解説してください：${選択文}
関連検索	この文章に関連する重要なテーマを教えてください：${選択文}
書き換え	ユーザーにポップアップで自由編集させる（送信前に確認）
4. ChatGPT / Gemini を開いてプロンプトを自動送信
ChatGPTとGeminiの2タブを同時に新規で開く

各ページのプロンプト欄に自動で文章を入力し、送信まで行う

5. 書き換え編集用ポップアップ（※選択肢3のみ）
編集用のフォーム（textarea）を表示し、ユーザーがプロンプトを修正可能

修正後に「送信」ボタンを押すと、2つのタブが開いて送信処理

🌐 対応サービス
サービス	備考
ChatGPT	https://chat.openai.com/ にアクセス・入力・送信
Gemini	https://gemini.google.com/app にアクセス・入力・送信
※Googleアカウントでのログインが必要
🔧 技術要素・設計方針
項目	内容
拡張機能の種類	Chrome拡張機能（Manifest V3）
主なファイル	manifest.json, background.js, content.js, popup.html
イベント	chrome.contextMenus, chrome.scripting, chrome.tabs
タブ操作	chrome.tabs.create + scripting.executeScript によるDOM操作
入力処理	各サイトの textarea に文字列を入力 → Enter 送信
セキュリティ	API不使用。ユーザー操作の補助に限定。外部送信なし。
⚠ 想定される制約・課題
ChatGPT/GeminiのUIが変更された場合、DOMのセレクタ変更が必要

GeminiはGoogleアカウントへのログインが前提（自動ログイン不可）

自動送信処理はブラウザ側のセキュリティポリシーによって制限される可能性あり

🚀 今後の拡張案（将来的な発展性）
APIを利用した高度な対話モード（プロンプトログの保存・AI間比較など）

ローカルLLMへの対応（オフライン支援）

他AI（Claude, Perplexityなど）との連携拡張

選択範囲のハイライト保持・思考履歴の記録


## 機能設計書

機能設計書：選択テキストAI送信ブラウザ拡張機能
1. 📚 プロジェクト概要
項目	内容
プロジェクト名	AI Assist Linker
種類	Chrome拡張機能（Manifest V3）
目的	選択テキストをChatGPTおよびGeminiに自動送信し、解説・関連調査・書き換え支援を行う
使用技術	JavaScript / HTML / Chrome Extension APIs
2. 🧩 機能構成
2.1 機能一覧
ID	機能名	概要
F-01	テキスト選択検知	ユーザーがWebページ上でテキストを選択すると検知する
F-02	コンテキストメニュー表示	右クリックで3つのメニューを表示
F-03	プロンプトテンプレ生成	選択肢に応じたプロンプトを自動生成
F-04	編集ポップアップ表示	「書き換え」選択時にポップアップで入力編集
F-05	AIタブの生成	ChatGPTとGeminiの2タブを同時に開く
F-06	入力欄への自動入力	開いたタブでプロンプト欄に入力・送信
3. 🧠 UX仕様
3.1 操作フロー
ユーザーがWebページ上でテキストを選択

右クリックで拡張メニューを表示

以下の選択肢から1つを選ぶ：

選択部分の詳しい解説

関連内容の検索

書き換え → 編集ポップアップ表示

それぞれの選択肢に応じてプロンプトを生成

ChatGPTとGeminiの2つのタブを開き、自動入力・送信

4. 🗃 ファイル構成
ファイル名	役割
manifest.json	拡張機能の定義、権限、スクリプト指定
background.js	コンテキストメニュー生成・タブ生成処理
inject.js	ChatGPT/GeminiへのDOM操作スクリプト
popup.html	「書き換え」時の編集ポップアップUI
popup.js	編集データを受け取り、送信処理を制御
5. 🔄 コンテキストメニュー仕様
ID	表示文	機能ID	テンプレート
M-01	選択部分の詳しい解説	F-03, F-05, F-06	以下の文章を詳しく解説してください：{選択テキスト}
M-02	関連内容の検索	F-03, F-05, F-06	この文章に関連するトピックや背景を教えてください：{選択テキスト}
M-03	書き換え	F-04, F-05, F-06	ユーザー入力内容そのまま
6. 🖥 タブ生成・入力処理仕様
対象URL：
ChatGPT: https://chat.openai.com/

Gemini: https://gemini.google.com/app

入力手順（共通）：
textarea を querySelector() で取得

.value にプロンプトを代入

input イベントを発火

送信ボタンを click() で押下

7. 🔐 セキュリティと制限
内容	対応・備考
DOM操作の不安定性	セレクタを抽象化・try/catchで対応
Geminiのログイン必要性	対応不可（ユーザーのログイン前提）
セキュリティポリシー	API不使用・ローカル操作に限定
権限設定	contextMenus, scripting, tabs, host_permissions
8. 📦 今後の拡張性
他AI（Claude, Perplexityなど）への対応

選択履歴の保存と再利用機能

ユーザーごとのカスタムプロンプトテンプレート管理

プロンプト処理の履歴管理・メモ連携
